\documentclass[a4paper]{article}
\usepackage[utf8]{inputenc}
\usepackage[natbib,sorting=none]{biblatex}
\usepackage{graphicx}
\usepackage{acronym}
\usepackage{indentfirst}
\usepackage{requirements} % custom package
\usepackage[htt]{hyphenat}
\usepackage{fancyhdr}
\usepackage{enumitem}
\usepackage{listings}
\usepackage{xcolor}
\usepackage{scrextend}
\usepackage{pifont}

\definecolor{commentgreen}{RGB}{2,112,10}
\definecolor{eminence}{RGB}{108,48,130}
\definecolor{weborange}{RGB}{255,165,0}
\definecolor{frenchplum}{RGB}{129,20,83}

\addbibresource{references.bib}
\newcommand{\comment}[1]{\textbf{[Comment: #1]}}

\begin{document}
\setlist[enumerate]{label=\alph*),leftmargin=0.4cm, topsep=0cm}
\setlist[itemize]{leftmargin=0.4cm, topsep=0cm}
\include{frontpage}
\pagenumbering{roman}
\tableofcontents
\addcontentsline{toc}{subsection}{Use Cases Summary}
\renewcommand\listtablename{Use Cases Summary}
\listoftables
\addcontentsline{toc}{subsection}{UML Diagrams List}
\renewcommand\listfigurename{UML Diagrams List}
\listoffigures
\rfoot{\includegraphics[width=30mm]{Images/trackme-logo-mini.png}}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\pagestyle{fancy}
\newpage
\pagenumbering{arabic}
\section{Introduction}

    \subsection{Purpose}
    This Requirement Analysis and Specification Document \cite{ieee1998ieee} is aimed at modeling and describing the system itself, its requirements, its constraints, its components and how it interacts with the world and the users. Moreover, this specifications also addresses some relevant QoS characteristics that the system should guarantee. 
        
    This document is directed and highly recommended to software designers and developers interested in the design and deployment of the proposed system.
    
    \subsection{Scope and Audience}
        \subsubsection{Description of the given problem}
        \textit{TrackMe} is a company that wants to develop an ease of use health monitoring application which offers different services for both young and old people who needs to keep track of their personal data in order to to keep their health safe.
        
        The system should provide an efficient data acquisition facility which gives the possibility to verified \textit{third-party} signed onto the service to request health status information about subscribed customers. The application may also allow \textit{individual} users to connect \textit{external devices} such as smart-watches or similar, to perform a more detailed data acquisition and monitoring.
        
        In addition, the \textit{third-party} may also provide a personalized and non intrusive SOS service for elderly people who requested it.
    
        Moreover, through the \textit{Track4Run} service, \textit{TrackMe} wants to provide to users signed in the application to create a new run: a competition in which other individuals can either participate as \textit{athletes} or watch as \textit{spectators}. Additionally, this feature may exploits other service functionality for keeping track of athletes progresses and for helping them to prevent major accident happen during the run.
        
        \subsubsection{World, Machine and Phenomena}
        
        This section is intended to provide a full description of the proposed system by meaning of \textit{Domains} and \textit{Phenomena} \cite{zave1997four}.
    
        The \textit{Machine Domain} is the set of phenomena that the machine can control: data structures, algorithms, devices and inputs it can get from the world.
        
        In contrast, the \textit{World Domain} is the real-life context in which the \textit{Machine} will be introduced. This is the part of the real-world in which the \textit{Machine} actions will be observed.
        
        The World and the Machine are connected too, because the latter should interact with the first one: this interaction is done through \textit{Shared Domain}, whose phenomena are observable both by the Machine and by the World. Shared Phenomena include events in the real world that the Machine can directly sense and actions in the real world that the Machine can directly cause.
        \newpage
        \begin{table}[!htpb]
        \centering
        \begin{tabular}{|l|l|l|l|}
        \hline
         \textbf{Phenomenon} & \textbf{World} & \textbf{Machine} & \textbf{Shared}\\ \hline
         Registration/Login/Log-out & & & X \\ \hline
         Manage Profile/Change Credentials & & & X \\ \hline
         Application logic & & X & \\ \hline
         Accept/Reject/Send Request & & & X \\ \hline
         Data Subscription/Sync/View & & & X \\ \hline
         Database Query & & X & \\ \hline
         Connect External Device & & & X \\ \hline
         GPS Tracking & & & X \\ \hline
         Enable Sos & & & X \\ \hline
         Locate nearest Ambulance & & & X \\ \hline
         Accident & X & & \\ \hline
         Create/Delete/Enroll/Watch/Start Run & & & X \\ \hline
        \end{tabular}
        \end{table}
        
        \subsubsection{Goals}
        
        \newgoal{Allow a Guest to register as an Individual.}
        
        \newgoal{Allow a Guest to register as a Third-Party.}
        
        \newgoal{The Guest should be able to sign in into the application.}
        
        \newgoal{The User should be able to change his credentials.}
        
        \newgoal{The User should be able to log-out from the system.}
        
        \newgoal{The Individual should be able to change his personal data.}
        
        \newgoal{The Third-Party should be able to change his organization data.}
        
        \newgoal{The Third-Party should be able to send requests to the Individuals.}
        
        \newgoal{The Third-Party should be able to make group requests.}
        
        \newgoal{The Third-Party should be able to subscribe to new data, once an Individual request is made.}
        
        \newgoal{The Third Party should be able to view Individual's data to whom has sent a request.}
        
        \newgoal{The Individual should be able to accept or reject a request coming from a Third-Party.}
        
        \newgoal{The Individual shall be able connect an external device to the system.}
        
        \newgoal{The Third-Party shall be able to activate Automated-SOS service.}
        
        \newgoal{The Individual shall be able to activate Automated-SOS service.}
        
        \newgoal{The Dispatcher shall be able to assign an ambulance to an incident.}
        
        \newgoal{The Organizer shall be able to create a run.}
        
        \newgoal{The Organizer should be able to start a run.}
        
        \newgoal{The Organizer should be able to delete a run.}
        
        \newgoal{The Athlete should be able to enroll a run.}
        
        \newgoal{The Athlete should be able to unroll a run.}
        
        \newgoal{The Spectator should be able to watch a run.}
    
    \subsection{Document Overview}
        This initial part of the document is intended to provide both an overview of the problem and an idea of the proposed solution.
        
        Following section is aimed at giving a more detailed description of the proposed system, by meaning of the application point of view. Additionally, it addresses functionality, user characteristics, dependencies and constraints.
        
        Third chapter shows a detailed analysis of \textit{TrackMe} in terms both functional and non-functional requirements of the system. Furthermore, takes into account requirements mapping on use cases and their detailed description through well known standards for specification documents such as \textit{UML} for Use Case Diagrams \cite{rumbaugh2004unified}.
        
        Endmost section illustrates \textit{Alloy} for formal analysis \cite{jackson2006software} describing models including purpose, proof and explanation. In addition, describes worlds obtained by running them.
        
        Further, there is a list of tables and a list of figures at the beginning of the document representing respectively use cases and diagrams in order to help the reader to understand them and navigate the specification.
        
    \subsection{Definition, Acronyms and  Abbreviations}
            \subsubsection{Keywords}
            The key words “MUST”, “MUST NOT”, “REQUIRED”, “SHALL”, “SHALL NOT”, “SHOULD”, “SHOULD NOT”, “RECOMMENDED”, “MAY”, and “OPTIONAL” in this document are to be interpreted as described in RFC 2119 \cite{bradner1997key}.
            \subsubsection{Definition of Terms}
            This document uses several terms that might be more loosely used elsewhere. These terms are defined here as they will be used later on in this document.
                \begin{description}
                    \item[\textbf{Subscribed User}] an Individual for which one Third Party whom asked to subscribe to the data has accepted the Third Party's request
                    
                    \item[\textbf{External Device}] a device such as a smart-watch or similar, capable of data acquisition
                    
                    \item[\textbf{Run}] a competition organized and managed by an \textit{Organizer} to which \textit{Athletes} and \textit{Spectators} can enroll as participant or watchers
                    
                    \item[\textbf{Run Started}] a competition with at least two \textit{Athletes} enrolled that the \textit{Organizer} has started
                    
                    \item[\textbf{Run Created}] a competition with any number of \textit{Athletes} enrolled
                    
                    \item[\textbf{Track}] A route where athletes will compete in a specific \textit{Run}
                    
                    \item[\textbf{Map}] A \textit{Track} that display all \textit{Athletes} position in a specific \textit{Run}
                    
                    \item[Accident] An event triggered when the monitored user's parameter overcome certain thresholds
                    
                    \item[\textbf{TrackMe}] the \textit{"system to be"}
                    
                    \item[\textbf{Data4Help}] a data monitoring service provided by \textit{TrackMe}
                    
                    \item[\textbf{Automated-SOS}] an SOS service built on top of \textit{Data4Help}
                    
                    \item[\textbf{Track4Run}] run management service offered by \textit{TrackMe} application
                    
                    \item[\textbf{Credential}] as used in this document, is a combination of both username and password used by an \textit{User} to authenticate him/herself during the Log-in phase
                    
                    \item[\textbf{Personal Data}] users' data of different kind either for Individuals (name, surname, age, etc.) or for Third-Parties such as Organization name, number of employees or VAT number
                \end{description}
                
            \subsubsection{Abbreviations}
            \begin{description}
                \item[A-n]: Assumption number n
                \item[C-n]: Constraint number n
                \item[D-n]: Dependency number n
                \item[GOAL-n]: Goal number n
                 \item [REQ-n]: Functional Requirement number n
            \end{description}
            
            \subsubsection{Acronyms}
            \begin{acronym}
                \acro{RASD}{Requirement Analysis and Specification Document}
                \acro{UML}{Unified Modelling Language}
                \acro{QoS}{Quality of Service}
                \acro{SSN}{Social Security Number}
                \acro{FC}{Fiscal Code}
                \acro{VAT}{Value Added Tax}
                \acro{BT}{Bluetooth}
                \acro{NFC}{Near Field Communication}
                \acro{GPS}{Global Positioning System}
                \acro{HTTP}{Hyper Text Transfer Protocol}
                \acro{HTTPS}{Hyper Text Transfer Protocol over SSL}
                \acro{SSL}{Secure Socket Layer}
                \acro{SHA}{Secure Hash Algorithm}
                \acro{SDK}{Software Development Kit}
                \acro{JSON}{JavaScript Object Notation}
               \acro{CBOR}{Concise Binary Object Representation} \acro{REST}{REpresentational State Transfer}
                \acro{API}{Application Programming Interface}
                \acro{UPS}{Uninterruptible Power Supply}
                \acro{DBMS}{Data Base Management System}
            \end{acronym}
            
    \subsection{References}
        \printbibliography[heading=none]
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newpage
\section{Overall Description}
    \subsection{Product Perspective}
    
    The system is not part of any already existing software and can be completely developed from scratch. It should interface with a database server (even local), shall be able to interact with several GPS systems from several manufacturers widely used in mobile devices and may be able to do the same with external devices such as smart-watches of different kind. Furthermore, it should be capable of cooperating with an \textit{"ambulance dispatcher"} system in order to make reservations of ambulances in case of accident.
    
    The proposed solution is \textit{TrackMe}, a new health monitoring application which consists of a back-end server that manages users' registration, login and data and allows to keep everything synchronized between the two front-end applications:
        \begin{itemize}
            \item a web-based application to supply to the end user an ease of use interface web interface for \textit{TrackMe};
            \item a mobile application that allows the user to easily access the system from the smartphone.
        \end{itemize}
    
    The system should be able to query the database for storing and retrieving both users' credentials and personal data, besides of keeping everything synchronized between all the application instances.
    
    \subsubsection{Domain Model}
    \begin{figure}[!ht]
        \centering
        \includegraphics[width=\textwidth, keepaspectratio]{images/UML/DomainModel.jpg}
        \caption{Domain Model}
    \end{figure}
    
    \newpage

    \subsubsection{State Charts}
    
    \begin{figure}[!htpb]
        \centering
        \includegraphics[width=90mm, keepaspectratio]{images/UML/state_request.jpg}
        \hfill
        
        \centering
        \includegraphics[width=70mm, keepaspectratio]{images/UML/state_sos.jpg}
        
        \includegraphics[width=55mm, keepaspectratio]{images/UML/state_run.jpg}
        \caption{State Charts}
    \end{figure}
    
    \newpage
    
    \subsection{Product Functions}
    \textit{TrackMe} will provide three main services: \textit{Data4Help}, \textit{Automated-SOS} and \textit{Track4Run}.
    
    \paragraph{Data4Help :}
    the application will provide both \textit{"Sign-on"} and \textit{"Sign-in"} pages and will be able to register new users and to check credentials used to login.
    
    To register himself an user must provide an username and a password as well as his personal information. To be logged in, the user should send through the login form his credentials which the system will use to authenticate him.
    
    \textit{TrackMe} may yield an interface that allows individual users to connect external devices and if so, of course a method for acquiring data from it.
    
    The application should also provide to third-parties two possible data request options:
    \begin{itemize}
        \item Individual Data request: sent directly to the individual if they know an  individual by his/her social security number or fiscal code in Italy;
        \item Group Data request: access  to  anonymous  data  of  groups  of  individuals, if \textit{TrackMe}  that  approves  them  if  it  is  able  to  properly  anonymize  the  requested  data.
    \end{itemize}
    
    \paragraph{Automated-SOS:} the system implements \textit{Data4Help} services to manage individual's personal data and provide them to third-parties who requested for. In addition, there should be an interface both for third-party and individual users registered to \textit{Data4Help} that wants to enable an \textit{Automated-SOS} service. This feature should be able to use users' data to monitor their health status and, when such parameters are below certain thresholds, sends the location of the customer to an ambulance. Thus, the application should be able to interact with the GPS system of the customers' devices.
    
    \textit{Automated-SOS} is built on top of \textit{Data4Help} and provides individuals the capability of subscribing to third-parties who has enabled the service.
    
    \paragraph{Track4Run: } the software should provide to users that wants to use \textit{Track4Run} all the facilities they need such as a page for the creation of a new run with all the information (track, date and time) and two different pages to allow both spectators and athletes either watch or enroll/unroll to an existing run.
    
    \textit{Track4Run} is also built on top of \textit{Data4Help} and allows third parties to create new runs where athletes can participate. Athletes' position can be tracked and it will be sent to all spectators that are watching the run on a map.
    
    \subsection{User Characteristics}
        \subsubsection{Data4Help}
        \begin{itemize}
            \item \textbf{Guest:} a customer that is visiting \textit{TrackMe}. He can only login or register to the system.
            \item \textbf{User:} a \textit{Guest} successfully registered to \textit{TrackMe} and logged in to the system. He can be either an \textit{Individual} or a \textit{Third Party.}
            \item \textbf{Individual:} an \textit{User} that agreed that \textit{TrackMe} can collect his personal data. He is identified by a SSN/FC. Data acquisition can happen through smart watches or similar devices.
            \item \textbf{Third Party:} an \textit{User} that can ask an \textit{Individual} to gain access to their personal data. He is identified by a VAT number. He can also request access to data that belongs to a group of \textit{Individuals}, but the request shall be accepted only if \textit{TrackMe} can guarantee anonymity to the requested data. During a request he can also subscribe to new data that will be received as soon as is it is produced.
        \end{itemize}

        \subsubsection{Automated-SOS Extension}
        \begin{itemize}
            \item \textbf{Individual:} he can access to a list of Third Parties that enabled the Automated-SOS service. He can also select a Third Party from the list and subscribe to it.
            \item \textbf{Third Party:} it has the ability to enable the Automated-SOS service so that any Individual can subscribe to it.
        \end{itemize}
        
        \subsubsection{Track4Run Extension}
        \begin{itemize}
            \item \textbf{Organizer:} both an \textit{Individual} and a \textit{Third Party} that created at least one run. He can create, start or delete a run.
            \item \textbf{Athlete:} an \textit{Individual} that enrolled a created run. His position will be sent to all Spectators that joined that run.
            \item \textbf{Spectator:} an \textit{Individual} that joined a started run. He can see the position of all Athletes that are competing in the run until the run is finished.
        \end{itemize}
    
    \subsection{Assumptions and Dependencies}

        \subsubsection{Assumptions}
        \newassumption{The field "Password" and "Repeat Password" match.}
        
        \newassumption{Data provided by the individual, such as email and SSN, are valid.}
        
        \newassumption{Data provided by the Third-Party (i.e: VAT number) are valid.}
        
        \newassumption{The user is already registered.}
        
        \newassumption{Username and password provided match the ones previously stored in the registration process.}
        
        \newassumption{The user is logged in the system.}
        
        \newassumption{The Third-Party provides a SSN/FC of an individual already registered into the system.}
        
        \newassumption{The Third-Party provides not contradictory criteria for the selection of the group of individuals.}
        
        \newassumption{The Third-Party has sent at least a request to the user whose data she wants to subscribe.}
        
        \newassumption{The external device provided by the user is compatible with the system.}
        
        \newassumption{The user has activated NFC/Bluetooth on the mobile device.}
        
        \newassumption{The user has activated NFC/Bluetooth on the external device.}
        
        \newassumption{An Automated-SOS service is enabled from at least one Third Party.}
        
        \newassumption{At least one ambulance dispatcher is available for SOS request serving.}
        
        \newassumption{The dispatcher is able to communicate with both the individual and the ambulance associated with the accident.}
        
        \newassumption{The organizer defines a not empty path.}
        
        \newassumption{The Organizer has already created a run.}
        
        \newassumption{At least two athletes are enrolled in the run.}
        
        \newassumption{There is at least one created run.}
        
        \newassumption{The Athlete is enrolled to at least one run.}
        
        \newassumption{There is at least one started run.}
        
        \newassumption{The individual has approved TrackMe' terms of use.}
        
        \newassumption{The individual has received at least an individual request.}
        
        \newassumption{The individual has accepted the individual request.}
        
        \newassumption{Username is not already taken.}
        
        \newassumption{Password is valid (i.e.: at least 8 alphanumerical characters).}
        
        \newassumption{The run has not been started.}
        
        \newassumption{The individual has received an individual request a specific Third Party.}
        
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newpage
\section{Specific Requirements}

    \subsection{External Interface Requirements}
        
        \subsubsection{User Interfaces}
        
        The mobile application shall provide login and two different registration interfaces for both individual and third parties. The users would also be able to manage their profile page.
        
        \textit{TrackMe} shall provide an ease of use management interface for requests handling. Moreover, a data management page for Third Parties shall be present in order to allow customers to manage requested data.
        In addition, for Track4Run users, the system shall provide all the facilities to create, enroll and watch a run.
        
        \subsubsection{Hardware Interfaces}
        The Individuals need a smartphone and an external device capable of data acquisition. The external device also needs a way to communicate with the smartphone that should be NFC and/or BT.
        The GPS system of the smartphone or the one of the external device (if connected) is needed in order to track customer's position.
        Furthermore, a separate system to notify the ambulances in case of accident shall be integrated within already existing ambulances' on-board technologies. This system and further interactions with \textit{TrackMe} are out of scope of this specification document.
        
        \subsubsection{Software Interfaces}
        Both the front end and the back-end should be compatible with most of existing PC and mobile operating systems. The mobile and application should indeed be supported at least on Android Lollipop 5.0 and iOS5 or major versions; the web application shall instead be compatible with different browsers such as Google Chrome (with V8 JavaScript engine), Mozilla Firefox v3.0 (or major versions) and Safari v4.0 (or major versions).
        
        Moreover the developer could choose to implement REST services to improve portability, reliability, modifiability and simplicity of the software.
        
        \subsubsection{Communication Interfaces}
        The application shall communicate with the back-end server over HTTPS and may enable O-Auth2 authentication protocol for clients. In order to connect and interact with external devices the mobile application shall also support BT and/or NFC.
        
        Moreover, the system shall be able to interact with a DBMS both for for storing and retrieving user data, also in real-time in an Automated-SOS related scenario. In addition, the client application should be able to interact with the back-end service which will indeed be able get client requests, send responses and make data available to clients using lightweight object oriented communication protocols such as JSON or CBOR.

\newpage
\subsection{Functional Requirements}
    \newcommand{\indentsize}{1cm}
        
    \goal{Allow a Guest to register as an Individual.}
        
        \begin{addmargin}{\indentsize}
        \newrequirement{A customer not signed-on must be able to begin the Individual's registration process to TrackMe providing a username, a password and his personal data.}
        \assumption{Username is not already taken.}
        \assumption{Password is valid (i.e.: at least 8 alphanumerical characters).}
        \assumption{The field "Password" and "Repeat Password" match.}
        \assumption{Data provided by the individual, such as email and SSN, are valid.}
        \assumption{The individual has approved TrackMe' terms of use.}
        \end{addmargin}
        
    \goal{Allow a Guest to register as a Third-Party.}
        \begin{addmargin}{\indentsize}
        \newrequirement{A customer not signed-on must be able to begin the Third Party's registration process to TrackMe providing a username, a password and its organization data.}
        \assumption{Username is not already taken.}
        \assumption{Password is valid (i.e.: at least 8 alphanumerical characters).}
        \assumption{The field "Password" and "Repeat Password" match.}
        \assumption{Data provided by the Third-Party (i.e: VAT number) are valid.}
        \assumption{The individual has approved TrackMe' terms of use.}
        \end{addmargin}
        
    \goal{The Guest should be able to sign in into the application.}
        \begin{addmargin}{\indentsize}
        \newrequirement{The system must provide a log-in interface for already registered users, not previously signed into the application.}
        \assumption{The user is already registered.}
        \assumption{Username and password provided match the ones previously stored in the registration process.}
        \end{addmargin}

    \goal{The User should be able to change his credentials.}
        \begin{addmargin}{\indentsize}
        \newrequirement{TrackMe must provide to users the possibility to change their username.}
        \newrequirement{TrackMe must provide to registered users the possibility to change their password.}
        \assumption{The user is logged in the system.}
        \assumption{Username and password provided match the ones previously stored in the registration process.}
        \assumption{Username is not already taken.}
        \end{addmargin}
        
    \goal{The User should be able to log-out from the system.}
        \begin{addmargin}{\indentsize}
        \newrequirement{The system must provide the possibility to the user of logging out.}
        \assumption{The user is logged in the system.}
        \end{addmargin}
        
    \goal{The Individual should be able to change his personal data.}
        \begin{addmargin}{\indentsize}
        \newrequirement{The system must provide the possibility to change Individual's personal data.}
        \assumption{Data provided by the individual, such as email and SSN, are valid.}
        \assumption{The user is logged in the system.}
        \end{addmargin}
        
    \goal{The Third-Party should be able to change his organization data.}
        \begin{addmargin}{\indentsize}
        \newrequirement{The system must provide the possibility to change Third Party's 
        organization data.}
        \assumption{Data provided by the Third-Party (i.e: VAT number) are valid.}
        \assumption{The user is logged in the system.}
        \end{addmargin}
        
    \goal{The Third-Party should be able to send requests to the Individuals.}
        \begin{addmargin}{\indentsize}
        \newrequirement{Data4help must allow the Third-Parties to send a request to a particular individual, provided his SSN/FC.}
        \assumption{The user is logged in the system.}
        \assumption{The Third-Party provides a SSN/FC of an individual already registered into the system.}
        \end{addmargin}
        
    \goal{The Third-Party should be able to make group requests.}
        \begin{addmargin}{\indentsize}
        \newrequirement{Data4help must allow the Third-Parties to generated a request for a group of individuals.}
        \newrequirement{The system must be able to anonymize users' requested data.}
        \assumption{The user is logged in the system.}
        \assumption{The Third-Party provides not contradictory criteria for the selection of the group of individuals.}
        \end{addmargin}
        
    \goal{The Third-Party should be able to subscribe to new data, once an Individual request is made.}
        \begin{addmargin}{\indentsize}
        \newrequirement{Data4help must allow the Third-Parties to choose if subscribe to new data associated with a particular Individual.}
        \newrequirement{The system must be able to periodically query the database in order to get new data as soon as they are produced.}
        \assumption{The user is logged in the system.}
        \assumption{The Third-Party has sent at least a request to the user whose data she wants to subscribe.}
        \assumption{The individual has received an individual request a specific Third Party.}
        \assumption{The individual has accepted the individual request.}
        \end{addmargin}
        
    \goal{The Third Party should be able to view Individual's data to whom has sent a request.}
        \begin{addmargin}{\indentsize}
        \newrequirement{Data4help must allow the Third Party to see a list of sent requests and related Individual's data.}
        \assumption{The user is logged in the system.}
        \end{addmargin}
        
    \goal{The Individual should be able to accept or reject a request coming from a Third-Party.}
        \begin{addmargin}{\indentsize}
        \newrequirement{Data4help must allow the Individual to see a list of the received requests from Third Parties.}
        \newrequirement{Data4help must allow the Individual to accept or reject a request from the list.}
        \assumption{The user is logged in the system.}
        \assumption{The individual has received at least an individual request.}
        \end{addmargin}
        
    \goal{The Individual shall be able connect an external device to the system.}
        \begin{addmargin}{\indentsize}
        \newrequirement{Data4help must allow the Individual to connect an external device through BT or NFC.}
        \assumption{The user is logged in the system.}
        \assumption{The external device provided by the user is compatible with the system.}
        \assumption{The user has activated NFC/Bluetooth on the mobile device.}
        \assumption{The user has activated NFC/Bluetooth on the external device.}
        \end{addmargin}
        
    \goal{The Third-Party shall be able to activate Automated-SOS service.}
        \begin{addmargin}{\indentsize}
        \newrequirement{The system must allow the Third-Party to activate Automated-SOS service.}
        \newrequirement{The system must be able to assign an ambulance dispatcher to the SOS service.}
        \assumption{The user is logged in the system.}
        \assumption{At least one ambulance dispatcher is available for SOS request serving.}
        \end{addmargin}
        
    \goal{The Individual shall be able to activate Automated-SOS service.}
        \begin{addmargin}{\indentsize}
        \newrequirement{The system must allow the Individual to activate Automated-SOS service.}
        \newrequirement{The system should allow the Individual to choose between third parties who has enabled the service.}
        \assumption{The user is logged in the system.}
        \end{addmargin}
        
    \goal{The Dispatcher shall be able to assign an ambulance to an incident.}
        \begin{addmargin}{\indentsize}
        \newrequirement{The system must be able to get the Individual position.}
        \newrequirement{The system must be able to send the position to the nearest ambulance.}
        \assumption{An Automated-SOS service is enabled from at least one Third Party.}
        \assumption{At least one ambulance dispatcher is available for SOS request serving.}
        \assumption{The dispatcher is able to communicate with both the individual and the ambulance associated with the accident.}
        \end{addmargin}
        
    \goal{The Organizer shall be able to create a run.}
        \begin{addmargin}{\indentsize}
        \newrequirement{Track4Run must allow the organizer to create a run with a date, time, duration and a path.}
        \newrequirement{The system must provide an interface that allows the user to define a path on an interactive map.}
        \assumption{The user is logged in the system.}
        \assumption{The organizer defines a not empty path.}
        \end{addmargin}
        
    \goal{The Organizer should be able to start a run.}
        \begin{addmargin}{\indentsize}
        \newrequirement{Track4Run must allow the organizer to start a run previously created.}
        \assumption{The user is logged in the system.}
        \assumption{The Organizer has already created a run.}
        \assumption{At least two athletes are enrolled in the run.}
        \end{addmargin}
        
    \goal{The Organizer should be able to delete a run.}
        \begin{addmargin}{\indentsize}
        \newrequirement{Track4Run must allow the organizer to delete a run previously created.}
        \assumption{The user is logged in the system.}
        \assumption{The Organizer has already created a run.}
        \assumption{The run has not been started.}
        \end{addmargin}
        
    \goal{The Athlete should be able to enroll a run.}
        \begin{addmargin}{\indentsize}
        \newrequirement{Track4Run must allow the Athlete to enroll to an already existing run.}
        \assumption{The user is logged in the system.}
        \assumption{There is at least one created run.}
        \end{addmargin}
        
    \goal{The Athlete should be able to unroll a run.}
        \begin{addmargin}{\indentsize}
        \newrequirement{Track4Run must allow the Athlete to unroll a run.}
        \assumption{The user is logged in the system.}
        \assumption{The Athlete is enrolled to at least one run.}
        \end{addmargin}
        
    \goal{The Spectator should be able to watch a run.}
        \begin{addmargin}{\indentsize}
        \newrequirement{Track4Run must allow the Spectator to see the position of the Athletes on a map during a run.}
        \assumption{The user is logged in the system.}
        \assumption{There is at least one started run.}
        \end{addmargin}
    \subsubsection{Use Cases Diagrams}
        
        \begin{figure}[!htpb]
    	\centering
    	\includegraphics[width=\textwidth]{images/UML/Guest.jpg}
    	\caption{Use Cases: Guest}
    	\end{figure}
        \begin{figure}[!htpb]
    	\centering
    	\includegraphics[width=\textwidth]{images/UML/Individual.jpg}
    	\caption{Use Cases: Individual}
    	\end{figure}
    	\begin{figure}[!htpb]
    	\centering
    	\includegraphics[width=\textwidth]{images/UML/ThirdParty.jpg}
    	\caption{Use Cases: ThirdParty}
        \end{figure}
    	\begin{figure}[!htpb]
    	\centering
    	\includegraphics[width=\textwidth]{images/UML/Accident.jpg}
    	\caption{Use Cases: Dispatcher}
    	\end{figure}
        \newpage
        
        \subsubsection{Use Cases}
        
        \begin{usecase}{Individual Registration}
        \brief{A guest sign up to the application as an Individual.}
        \actor{Guest, TrackMe.}
        \pre{The individual has a valid SSN/FC and he has selected the \textit{Individual} option in the Registration page.}
        \bflow{TrackMe asks to provide username, password, SSN/FC (based on region) and user personal information such as name, surname, age, gender, e-mail, nationality and optional notes about his health condition.}
              {The individual fills out the requested information and presses the confirm button.}
              {TrackMe registers that user as an Individual and adds it to the  Database.}
        \post{The individual is successfully registered as an Individual.}
        \except{The Guest provide a username already present on the database. In this case an error message is printed out the guest must chose a correct username.}
        {If the password chosen is too short an error message is printed out and the Guest must chosen an other one.}
      \end{usecase}

        \begin{usecase}{Third Party Registration}
        \brief{A Guest sign up to the application as a Third-Party}
        \actor{Guest, TrackMe.}
        \pre{The third party has a valid VAT and he has selected the \textit{Third-Party} option in the Registration page.}
         \bflow{TrackMe asks to provide a VAT number and organization personal information.}
              {The Third-Party fills out the requested information and presses the confirm button.}
               {TrackMe asks to provide username and password.}
              {The system registers that user as a Third-Party and adds it to the  Database.}
        \post{The Guest is successfully registered as a Third-Party.}
        \except{The guest provide a username already present on the database. In this case an error message is printed out the guest must chose a correct username.}
        {If the password chosen is too short an error message is printed out and the guest must chosen an other one.}
      \end{usecase}
      
        \begin{usecase}{Log-in}
        \brief{A Guest sign in to access the application.}
        \actor{Guest, TrackMe.}
        \pre{The Guest is already registered and it's on the main page.}
        \bflow{TrackMe provides to the \textit{Guest} a form composed by two text boxes where the user can write and a button to send the form. The first box is the \textit{'username'}, while the latter is the \textit{'password'} field.}
              {The Guest writes his username on the \textit{'username'} box and his associated password on \textit{'password'} box and presses the Log-in button.}
              {TrackMe checks the username is on the DB and that its associated password is correct and checks whether he is  registered as individual or Third Party.}
              {TrackMe finds that username and its associated password are valid and let the guest log-in into the system.}
        \post{The Guest is successfully authenticated either as Individual or Third-Party.}
        \except{If the username is not present in the database an error message is showed and the access to the system is not granted }
        {If the password inserted is not associated with the given username, an error message is showed and the guest cannot access the system}
        \end{usecase}
        \newpage
       \begin{usecase}{User Changes Username}
        \brief{A user changes his username}
        \actor{User, TrackMe.}
        \pre{The User is logged in the system and is in the change credentials section.}
        \bflow{The User clicks on the  \textit{'Change credentials'} button and select "Username".}
              {TrackMe redirects the User to a page and he can now insert a new username writing it into a box.}
              {The User clicks on the submit button.}
              {The user's row in the database is updated with his new username.}
        \post{The User has successfully changed his username.}
        \except{The new username is already present on the database and an error mistake is showed}
       \end{usecase}
       
       \begin{usecase}{User Changes Password}
        \brief{A user changes his password}
        \actor{User, TrackMe.}
        \pre{The User is logged in the system and is in the change credentials section.}
        \bflow{The User clicks on the  \textit{'Change credentials'} button and select "Password".}
              {TrackMe asks to the user to insert the old password, a new password and to repeat the latter once.}
              {The User clicks on the submit button.}
              {The User's row in the database is updated with his new password.}
        \post{The User has changed his password.}
        \except{If the new password is too short and an error message is showed.}
        {If the old password inserted is not correct an error message is printed out.}
       \end{usecase}
              
       \begin{usecase}{User Log-out}
        \brief{A user logs out from the system}
        \actor{User, TrackMe.}
        \pre{The User is logged in the system and is on the main page.}
        \bflow{The User clicks on the  \textit{'Log-out'} button.}
              {TrackMe asks to the user if he is sure he wants to log-out the system.}
              {The User select the button \textit{'Confirm'}.}
         \post{The User is not logged anymore into TrackMe.}
        \end{usecase}

       \begin{usecase}{Manage Individual Profile}
        \brief{An Individual can change the setting of his profile.}
        \actor{Individual, TrackMe.}
        \pre{The User is logged in the system as an Individual and he's on the profile page.}
        \bflow{TrackMe provides a box with the User's description, and a box with the user's image}
        {Individual can choose above several actions:
            \begin{itemize}
            \item The Individual can change any of its personal data.
            \item The Individual can click on the image to update his picture.
        \end{itemize}}
        {The Individual clicks on the \textit{Save Changes} button provided by TrackMe.}
        \post{The Individual has modified his profile data.}
        \epoint{The Individual clicks on the\textit{ Manage Request}, \textit{Connects External Devices} or \textit{Enable Automated SOS button}.}
       \end{usecase}
       
       \begin{usecase}{Manage Third-Party Profile}
        \brief{A Third-Party can change the settings of his profile.}
        \actor{Third-Party, TrackMe.}
        \pre{The User is logged in the system as a Third-Party and he's on the profile page.}
        \bflow{TrackMe provides a box with the user's description, and a box with the user's image.}
        {Third Party can choose above several actions:\begin{itemize}
            \item The Third-Party can change any of its personal data.
            \item The Third-Party can click on the image to update his picture.
        \end{itemize}}
        {The Third-Party clicks on the \textit{'Save Changes'} button provided by TrackMe.}
        \post{The Third-Party has modified his profile data.}
        \epoint{The Third-Party clicks on one of the following buttons: \textit{Enable Automated SOS }, \textit{Make Individual Request}, \textit{Make Group Request}, \textit{View Data}.}
       \end{usecase}
           
        \subsubsection{Data4Help}
      
        \begin{usecase}{Make Individual Request}
        \brief{A Third Party sends a request to an Individual to view his data.}
        \actor{Third Party, TrackMe.}
        \pre{The Third-Party is logged-in, has selected the \textit{'Make Individual Request'} option and has a valid SSN/FC of a registered individual.}
        \bflow{TrackMe provides a box called \textit{'SSN/FC'} where the third party writes the individual \textit{'SSN/FC'}}
        {Third Party presses the \textit{'Submit'} button.}
        {TrackMe sends the data request to the individual and informs the Third-Party user that the operation succeed.}
        \post{The third party has access to the data of the individual who received the request.}
        \epoint{The Third-Party selects the 'Subscribe to new data' option.}
        \end{usecase}
        
        \begin{usecase}{Make Group Request}
        \brief{A third party make a group request that allows to see data of a group of individuals.}
        \actor{Third Party, TrackMe.}
        \pre{The third-party is logged-in and has selected the 'Make Group Request' option.}
        \bflow{TrackMe provides an interface in which a third-party can insert search criteria for group requests.}
        {Third party fills out the form and then presses the button \textit{'Send Request'}.}
        {TrackMe checks if the number of individuals of the group who matches the search criteria defined on point \textit{a)} is greater than 1000.}
        {TrackMe informs the Third-Party that the operation succeed.}
        \post{The Third Party has access to the anonymized data that belongs to a specific group of Individuals.}
        \epoint{The Third-Party selects the 'Subscribe to new data' option.}
        \except{If the number of individual that satisfy the request is lower than 1000 an error message is printed and the request is rejected.}
        \end{usecase}
        
        \begin{usecase}{Subscribe to New Data}
        \brief{A Third Party subscribes to the data of an individual or a group.}
        \actor{Third Party, TrackMe.}
        \pre{The Third-Party is logged-in and is on requests page.}
        \bflow{TrackMe provides a check-box to allow a Third-Party to choose if she wants to be subscribed to new data.}
            {Third party checks the \textit{'Subscribe'} box.}
            {TrackMe queries periodically the database to check if data has changed and if so will send the new data to the subscribed third-party.}
        \post{The third party is now subscribed to the data and will receive new data as soon as they are produced.}
        \end{usecase}
        
        \begin{usecase}{Manage Request}
        \brief{An Individual accepts the request to view his personal data.}
        \actor{Individual, TrackMe.}
        \pre{The individual is logged-in and has selected  the 'Manage Request' option in the main page.}
        \bflow{TrackMe sends to the individual a request to view his data. The individual can see that the request was sent by a specific third-party. TrackMe provides two buttons called \textit{'Accept'} and \textit{'Reject'}.}
              {The individual presses the accept button.}
              {TrackMe sends to the Third-Party a confirmation about his request for that Individual.}
        \post{The third party has access to the Individual data.}
        \end{usecase}
        \vfill
        
        \begin{usecase}{View Data}
        \brief{A Third-Party can view the data of the Individuals that have received its request.}
        \actor{Third-Party, TrackMe.}
        \pre{The Third-Party is logged-in and is in the section to view the data collected by the application.}
        \bflow{The system provides a list of all request sent by the Third-Party, both individual and group requests}
        {Third Party can choose above several actions:
        \begin{itemize}
            \item Third Party select the user to which has sent at least an individual request
            \item Third Party clicks on the group request she has sent
        \end{itemize}}
        \post{The Third-Party can view the Individual data, create graphs, publish analysis.}
        \end{usecase}
        
        \subsubsection{Connection of External Devices}
        
        \begin{usecase}{Connect External Device}
        \brief{An Individual can connect External Device that allows the system to collect data.}
        \actor{Individual, TrackMe.}
        \pre{The Individual is in the home page and he pressed the \textit{'Connect External Device'} button.}
        \bflow {The system provides two drop-down menus that allows the user specify the type of device and which kind of wireless connection uses: Bluetooth or NFC.}
        {The user selects the desired option and checks the type of connection, than presses the \textit{Confirm} button.}
        {Track4Run asks now to connect the device in the way previously chosen.}
        {The Individual connects the device.}
        \post{The system can now collect data from the external device.}
        \end{usecase}
    \newpage
        \subsubsection{Automated-SOS}
        
        \begin{usecase}{Enable Automated-SOS Third Party}
        \brief{A Third-Party wants to enable the Automated-SOS service.}
        \actor{Third party, Ambulance Dispatcher, Individual, TrackMe.}
        \pre{The Third-Party is logged-in, it has pressed the Enable Automated-SOS on the main page and has not already activate this service.}
        \bflow {TrackMe checks if the Third Party has already enabled the service.}
              {TrackMe asks if the Third Party wants to enable Automated-SOS. It provides two buttons called \textit{'Confirm'} and \textit{'Back'}.}
              {Third-Party presses the \textit{'Confirm'} button.}
              \post{Third-Party has enabled Automated-SOS and individuals that enabled Automated-SOS can see the third-party in the Automated-SOS third-party list. An ambulance dispatcher has been assigned to that Third-Party by the system.}
              \except{If no dispatcher is available an error message will be printed out by the system.}
        \end{usecase}
        
        \begin{usecase}{Enable Automated-SOS Individual}
        \brief{An Individual wants to enable Automated-SOS. The individual will choose the Third-Party that will provide the Automated SOS functionality.}
        \actor{Individual, Third-Party, Automated-SOS.}
        \pre{The Individual is logged-in, it has pressed the Enable Automated SOS on the main page and has not already activate this service.}
        \bflow {TrackMe checks if the user has already enabled the service.}
              {TrackMe asks if the user wants to enable Automated-SOS. It provides two buttons called \textit{'Confirm'} and \textit{'Back'}.}
              {Individual presses the \textit{'Confirm'} button.}
              {TrackMe provides a table with the list of Third-Parties that have enabled Automated SOS.}
              {The Individual selects a Third-Party desired and presses \textit{'Confirm'}.}
              \post{Individual has enabled Automated-SOS and has selected the Third-Party that will provide that service.}
              \except{If no Third-Parties has activated Automated SOS an error message is printed.}
        \end{usecase}
        
        \begin{usecase}{Assign Ambulance}
        \brief{The Dispatcher will assign an ambulance to an individual, related to a particular Third-Party, whose actual data has overcame a certain limit.}
        \actor{Third Party, Individual, Ambulance Dispatcher, Ambulance.}
        \pre{At least one ambulance must be available; the Third Party must have enabled Automated-SOS. The Individual has selected that Third-Party to provide the service of Automated SOS. The Individual health parameters are under a certain threshold that depends on the health parameter.}
        \bflow{TrackMe checks the Individual's health parameters and finds that he has overcame the thresholds.}
            {TrackMe sends to the Ambulance Dispatcher a request with the GPS position of the subject in danger.}
              {The Ambulance Dispatcher checks in the ambulance database the nearest one available.}
              {The Ambulance Dispatcher request the ambulance found in point c).}
              {The ambulance selected should accept the request, otherwise Ambulance Dispatcher will request the second ambulance available and so on until the request is accepted.}
        \post{An ambulance will go to the position of the Individual.} 
        \end{usecase}
        
        \subsubsection{Track4Run}
        
         \begin{usecase}{Create Run}
        \brief{An Organizer creates a new run.}
        \actor{Organizer, TrackMe.}
        \pre{The Organizer has clicked on the \textit{Plus} button in the Track4Run section.}
        \bflow{TrackMe provides a set of boxes called \textit{'Name'}, \textit{'Country'}, \textit{'Date'} \textit{Time} and two buttons called \textit{'Confirm'} and \textit{'Back'}.}
              {The Organizer fills the boxes and then presses the \textit('Confirm') button.}
              {TrackMe asks the user to defines a \textit{path} using an interactive map}
              {The Organizer defines the \textit{path} using the tools provided by Track4Run to design a path on the map and presses the \textit{Confirm} button}
              {TrackMe adds the \textit{run} information to the DB.}
              {TrackMe informs the Organizer that the operation succeed.}
        \post{The run is created and has been added to the database and its state is \textit{created}. The list of available runs is updated.}
        \except{If the data and time provided for the run are previous the current one an error message is printed.}
        \end{usecase}
        
        \begin{usecase}{Start Run}
        \brief{An Organizer starts a run that he has previously created.}
        \actor{Organizer, TrackMe.}
        \pre{The Organizer is logged-in and is in the Track4Run section. The run he want to start must have at least two athletes enrolled.}
        \bflow{TrackMe provides a list of runs that the Organizer has created. Furthermore, the system provides two buttons  near the each run: \textit{Play} and \textit{Cross}.}
              {Organizer Presses the \textit{Play} button near the run he wants to start.}
              {TrackMe asks the Organizer to confirm his choice.}
              {The Organizer clicks on the \textit{start} button}
        \post{The selected run state is now \textit{started} and Athletes and Spectator will be notified.}
        \end{usecase}
        
        \begin{usecase}{Delete Run}
        \brief{An Organizer deletes run that he has previously created.}
        \actor{Organizer, TrackMe.}
        \pre{The Organizer is logged-in and is in the Track4Run section. At least one run has been created.}
        \bflow{TrackMe provides a list of runs that the Organizer has created. Moreover, the system provides two buttons \textit{Cross} and \textit{Play}.}
              {Organizer select a \textit{created} run and presses the \textit{'Cross '} button.}
              {The system asks if the Organizer wants to delete the run, and provides two buttons \textit{yes} and \textit{no}}
              {The Organizer clicks on the \textit{yes} button.}
        \post{Any Athlete that was subscribed to that run is no longer subscribed. Athletes can no longer subscribe to that run. That run is deleted from the list of available runs.}
        \end{usecase}
            
        \begin{usecase}{Enroll Run}
        \brief{The Athlete is logged-in and is in the Track4Run section. At least one run has been created}
        \actor{Athlete, TrackMe.}
        \pre{The Athlete is logged-in and is in the Track4Run section. At least one run has been created}
        \bflow{TrackMe provides a list of runs that the user can select. these runs must have the state \textit{not-started}. TrackMe also provides two buttons near each created run:  \textit{'Enroll'}  and  \textit{'Watch'} .}
              { The Individual clicks the \textit{'Enroll'} button of the chosen run.}
              {TrackMe informs the Athlete that the operation succeed.}
        \post{The Athlete successfully enrolls the run and his position will be sent to all \textit{Spectators} that spectate that run.}
        \end{usecase}
        
        \begin{usecase}{Unroll Run}
        \brief{An Athlete Unrolls to a run previously enrolled.}
        \actor{Athlete, TrackMe.}
        \pre{The Athlete is logged-in and is in the Track4Run section. He is also enrolled to at least one run.}
        \bflow{TrackMe provides the list of runs to which the athlete is enrolled.  Near each created run the buttons  \textit{'Unroll'}  and  \textit{'Watch'} .}
              {Individual selects one run from the list and presses the \textit{'Unroll'} button.}
              {TrackMe informs the Athlete that the operation succeed.}
        \post{The Athlete is no longer enrolled to that run.}
        \end{usecase}

        \begin{usecase}{Watch Run}
        \brief{A Spectator wants to watch a \textit{run}.}
        \actor{Spectator, TrackMe.}
        \pre{The Spectators is logged-in and is in the Track4Run section. At least one run has been \textit{Started}.}
        \bflow{TrackMe provides a list of runs with state started the state \textit{started}. TrackMe also provides two buttons: a \textit{Watch} and \textit{Enroll}.}
              {Individual selects one run from the list and presses the \textit{'Watch'} button.}
        \post{The spectator can view a map with all athletes positions that are enrolled in that run.}
        \end{usecase}
        
        \newpage
        
        \subsubsection{Traceability Matrix}
        \begin{traceabilitymatrix}
            \con{\ref{Allow a Guest to register as an Individual.}}
                {\ref{A customer not signed-on must be able to begin the Individual's registration process to TrackMe providing a username, a password and his personal data.}}
                {\ref{Individual Registration}}
                {}
            \con{\ref{Allow a Guest to register as a Third-Party.}}
                {\ref{A customer not signed-on must be able to begin the Third Party's registration process to TrackMe providing a username, a password and its organization data.}}
                {\ref{Third Party Registration}}
                {}
            \con{\ref{The Guest should be able to sign in into the application.}}
                {\ref{The system must provide a log-in interface for already registered users, not previously signed into the application.}}
                {\ref{Log-in}}
                {}
            \con{\ref{The User should be able to change his credentials.}}
                {\ref{TrackMe must provide to users the possibility to change their username.}}
                {\ref{User Changes Username}}
                {}
            \con{\ref{The User should be able to change his credentials.}}
                {\ref{TrackMe must provide to registered users the possibility to change their password.}}
                {\ref{User Changes Password}}
                {}
            \con{\ref{The User should be able to log-out from the system.}}
                {\ref{The system must provide the possibility to the user of logging out.}}
                {\ref{User Log-out}}
                {}
            \con{\ref{The Individual should be able to change his personal data.}}
                {\ref{The system must provide the possibility to change Individual's personal data.}}
                {\ref{Manage Individual Profile}}
                {}
            \con{\ref{The Third-Party should be able to change his organization data.}}
                {\ref{The system must provide the possibility to change Third Party's organization data.}}
                {\ref{Manage Third-Party Profile}}
                {}
            \con{\ref{The Third-Party should be able to send requests to the Individuals.}}
                {\ref{Data4help must allow the Third-Parties to send a request to a particular individual, provided his SSN/FC.}}
                {\ref{Make Individual Request}}
                {}
            \con{\ref{The Third-Party should be able to make group requests.}}
                {\ref{Data4help must allow the Third-Parties to generated a request for a group of individuals.}}
                {\ref{Make Group Request}}
                {}
            \con{\ref{The Third-Party should be able to make group requests.}}
                {\ref{The system must be able to anonymize users' requested data.}}
                {\ref{Make Group Request}}
                {}
            \con{\ref{The Third-Party should be able to subscribe to new data, once an Individual request is made.}}
                {\ref{Data4help must allow the Third-Parties to choose if subscribe to new data associated with a particular Individual.}}
                {\ref{Subscribe to New Data}}
                {}
            \con{\ref{The Third-Party should be able to subscribe to new data, once an Individual request is made.}}
                {\ref{The system must be able to periodically query the database in order to get new data as soon as they are produced.}}
                {\ref{Subscribe to New Data}}
                {}
            \con{\ref{The Third Party should be able to view Individual's data to whom has sent a request.}}
                {\ref{Data4help must allow the Third Party to see a list of sent requests and related Individual's data.}}
                {\ref{View Data}}
                {}
            \con{\ref{The Individual should be able to accept or reject a request coming from a Third-Party.}}
                {\ref{Data4help must allow the Individual to accept or reject a request from the list.}}
                {\ref{Manage Request}}
                {}
            \con{\ref{The Individual should be able to accept or reject a request coming from a Third-Party.}}
                {\ref{Data4help must allow the Individual to see a list of the received requests from Third Parties.}}
                {\ref{Manage Request}}
                {}
            \con{\ref{The Individual shall be able connect an external device to the system.}}
                {\ref{Data4help must allow the Individual to connect an external device through BT or NFC.}}
                {\ref{Connect External Device}}
                {}
            \con{\ref{The Third-Party shall be able to activate Automated-SOS service.}}
                {\ref{The system must allow the Third-Party to activate Automated-SOS service.}}
                {\ref{Enable Automated-SOS Third Party}}
                {}
                \con{\ref{The Third-Party shall be able to activate Automated-SOS service.}}
                {\ref{The system must be able to assign an ambulance dispatcher to the SOS service.}}
                {\ref{Enable Automated-SOS Third Party}}
                {}
            \con{\ref{The Individual shall be able to activate Automated-SOS service.}}
                {\ref{The system must allow the Individual to activate Automated-SOS service.}}
                {\ref{Enable Automated-SOS Individual}}
                {}
            \con{\ref{The Individual shall be able to activate Automated-SOS service.}}
                {\ref{The system should allow the Individual to choose between third parties who has enabled the service.}}
                {\ref{Enable Automated-SOS Individual}}
                {}
            \con{\ref{The Dispatcher shall be able to assign an ambulance to an incident.}}
                {\ref{The system must be able to get the Individual position.}}
                {\ref{Assign Ambulance}}
                {}
                \con{\ref{The Dispatcher shall be able to assign an ambulance to an incident.}}
                {\ref{The system must be able to send the position to the nearest ambulance.}}
                {\ref{Assign Ambulance}}
                {}
            \con{\ref{The Organizer shall be able to create a run.}}
                {\ref{Track4Run must allow the organizer to create a run with a date, time, duration and a path.}}
                {\ref{Create Run}}
                {}
                \con{\ref{The Organizer should be able to start a run.}}
                {\ref{The system must provide an interface that allows the user to define a path on an interactive map.}}
                {\ref{Start Run}}
                {}
            \con{\ref{The Organizer should be able to start a run.}}
                {\ref{Track4Run must allow the organizer to start a run previously created.}}
                {\ref{Start Run}}
                {}
            \con{\ref{The Organizer should be able to delete a run.}}
                {\ref{Track4Run must allow the organizer to delete a run previously created.}}
                {\ref{Delete Run}}
                {}
            \con{\ref{The Athlete should be able to enroll a run.}}
                {\ref{Track4Run must allow the Athlete to enroll to an already existing run.}}
                {\ref{Enroll Run}}
                {}
            \con{\ref{The Athlete should be able to unroll a run.}}
                {\ref{Track4Run must allow the Athlete to unroll a run.}}
                {\ref{Unroll Run}}
                {}
            \con{\ref{The Spectator should be able to watch a run.}}
                {\ref{Track4Run must allow the Spectator to see the position of the Athletes on a map during a run.}}
                {\ref{Watch Run}}
                {}
        \end{traceabilitymatrix}
        
        \newpage
        
        \subsection{Design and Implementation Constraints}
    
        \subsubsection{Regulatory Policies}
        In order to grant individual privacy and data anonymity, the system should be able to manage both individual and group requests:
        \begin{itemize}
            \item in case of individual requests, the system shall check that the third-party knows individual's security social number and should guarantee that only trusted third-parties can access his data and,
            \item in case of group requests, \textit{TrackMe} should be able to check in the number of individuals which will receive the request will be greater enough to guarantee user privacy.
        \end{itemize}
        
        \subsection{Software System Attributes}
        \subsubsection{Usability}
        The software application shall be usable for all people including elder ones and not \textit{computers} or \textit{smart-things} experts. Ease of use of both the mobile and the web application are (strictly) needed.
        
        \subsubsection{Reliability}
        The system should work without failures in 99,99\% of the cases. The possibility of the service success depends on the stability of the Internet connection and on the availability of the external services such as the Ambulance Dispatcher. In this case the users wont be able to access the system and, in case of accident, no ambulance will receive a call and the user must be informed that the service is unavailable.
        In case of general system failure the mean time to repair should be less than 2 days.
        In case of specific Automated-SOS service failure the mean time to repair should be less than 6 hours.
       
        \subsubsection{Availability}
        To guarantee the maximum profit by the service, in particular the one provide by Automated-SOS, the system must be available 24 hours per day and 7 day per week; availability shall also be granted by at least one "ambulance dispatcher". For the two other features \textit{Data4Help} and \textit{Track4Run}, small deviations from this requirement will be acceptable.
        
        \subsubsection{Security}
        The user allows the system to collect their health data. Furthermore, the position of the user is also present in the system, to provide services such as Automated SOS and Track4Run. If there is a leak of information the privacy of the user is compromised. For this reason at least these security features shall be granted:
       
        \begin{itemize}
        \item The users passwords are stored in the database hashed with SHA-256.
        \item The connection between the client and server is encrypted and sent over SSL to guarantee integrity of data. 
        \end{itemize}
        \subsubsection{Maintainability}

        The system is backed up 2 times a  week, in order to guarantee the database integrity and consistency. To avoid loss of data  the database is saved in at least two copies and the power supply is provided by a particular system that keeps online at least one database. Moreover an UPS for each \textit{Data Center} shall be present.
        \subsubsection{Portability}
        The system is expected to have a long life and it's expected to run on major os such as Windows, MacOs and Linux.
        The front-end application should work on at least on Android Lollipop 5.0 and iOS5 or major versions.

        The developers shall consider that the \textit{E-Health} applications area is a wide and promising market slice thus, in order to be competitive, they should guarantee an high level portability through interactions with other existing widely used software applications and hardware interfaces.
        
        \subsubsection{Performances Requirements}
        
        In case of accident, the application should be able to get users' position and send it to the ambulance dispatcher in reasonable time, then the dispatcher will forward the position to the nearest ambulance; all in less than five seconds.
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newpage
\section{Formal Analysis using Alloy}
\renewcommand*{\lstlistlistingname}{Alloy model samples}
\lstlistoflistings
%definition of alloy language for Latex
\lstdefinelanguage{Alloy}{
	morekeywords={
		module, open, as,
		private, abstract, sig, extends, in,
		lone, some, one, disj,
		fact, pred, fun, assert,
		run, check,
		for, but, exactly,
		this, not, implies, else, let,
		not, no, set, all, sum,
		iff, or, Int, and,
		none, univ, iden,
	},
	sensitive=true,
	morecomment=[l]{//},
	morecomment=[l]{--},
	morecomment=[s]{/*}{*/},
	morestring=[b]{"}
}[keywords,comments,strings]
\lstset {
    language=Alloy,
    frame=tb,
    breaklines=true,
    tabsize=3,
    showstringspaces=false,
    numbers=none,
    commentstyle=\color{commentgreen},
    keywordstyle=\color{blue},
    stringstyle=\color{red},
    basicstyle=\small\ttfamily, % basic font setting
    % keyword highlighting
    classoffset=1, % starting new class
    keywordstyle=\color{weborange},
    classoffset=0,
}
\subsection{Signatures}
    \lstinputlisting[language=Alloy, caption=Data4Help model definition, firstline=0, lastline=38]{TrackMeAlloyModel.als}
    
    \lstinputlisting[language=Alloy, caption=Automated-SOS model definition, firstline=39, lastline=58]{TrackMeAlloyModel.als}
    
    \lstinputlisting[language=Alloy, caption=Track4Run model definition, firstline=59, lastline=88]{TrackMeAlloyModel.als}
    
\subsection{Facts}
    \lstinputlisting[language=Alloy, caption=Common facts, firstline=89, lastline=97]{TrackMeAlloyModel.als}
    
    \lstinputlisting[language=Alloy, caption=Data4Help facts, firstline=98, lastline=125]{TrackMeAlloyModel.als}
    
    \lstinputlisting[language=Alloy, caption=Automated-SOS facts, firstline=126, lastline=171]{TrackMeAlloyModel.als}
    
    \lstinputlisting[language=Alloy, caption=Track4Run facts, firstline=172, lastline=212]{TrackMeAlloyModel.als}
    
\subsection{Predicates}

    \lstinputlisting[language=Alloy, caption=Data4Help predicates, firstline=213, lastline=232]{TrackMeAlloyModel.als}
    
    \lstinputlisting[language=Alloy, caption=Automated-SOS predicates, firstline=233, lastline=246]{TrackMeAlloyModel.als}
    
    \lstinputlisting[language=Alloy, caption=Track4Run predicates, firstline=247, lastline=276]{TrackMeAlloyModel.als}
    
    \lstinputlisting[language=Alloy, caption=Common predicates, firstline=277, lastline=320]{TrackMeAlloyModel.als}
    
\newpage
\subsection{Worlds}
    \lstinputlisting[language=Alloy, caption=Run data4Help, firstline=321, lastline=321]{TrackMeAlloyModel.als}
    \begin{figure}[!ht]
    	\centering
    	\includegraphics[width=\textwidth]{RASD/images/alloy/data4Help.png}
    \end{figure}
    
    \lstinputlisting[language=Alloy, caption=Run automatedSos, firstline=322, lastline=322]{TrackMeAlloyModel.als}
    \begin{figure}[!ht]
    	\centering
    	\includegraphics[width=\textwidth]{RASD/images/alloy/automatedSOS.png}
    \end{figure}
    \lstinputlisting[language=Alloy, caption=Run track4Run, firstline=323, lastline=323]{TrackMeAlloyModel.als}
    \begin{figure}[!ht]
    	\centering
    	\includegraphics[width=\textwidth]{RASD/images/alloy/track4Run.png}
    \end{figure}
    
    \newpage
    \lstinputlisting[language=Alloy, caption=Run showAll, firstline=324, lastline=324]{TrackMeAlloyModel.als}
    \begin{figure}[!ht]
    	\centering
    	\includegraphics[width=0.91\paperwidth, angle=90]{RASD/images/alloy/showAll.png}
    \end{figure}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Effort Spent}
    \begin{itemize}
        \item[-] \textbf{Davide Rutigliano: 50h}
        
        \item[-] \textbf{Davide Matta: 50h}
        
        \item[-] \textbf{Claudio Ferrante: 50h}
    \end{itemize}

\end{document}